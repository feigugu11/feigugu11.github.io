/* empty css             */import{E as X}from"./button-BkJlW2RO.js";import"./input-ryUbJMXj.js";import{E as q}from"./input-number-CMsrEhsG.js";import{E as G,a as O}from"./breadcrumb-item-BHV3nmiG.js";import{Y as E,aq as R,q as r,s as _,G as y,a6 as x,U as e,R as d,x as C,l as h,ar as Y,a9 as L,ak as M,y as N,P as B,ap as V,ab as A,B as j,v as z,N as H,M as k,a1 as F,a5 as U,F as m,T as Q,a4 as J,Q as f,a2 as K,a3 as W}from"./index-DUfKvXl3.js";/* empty css                   */import"./event-BE20p1dL.js";function Z(t){const a=[],n=2**t.length;for(let s=0;s<n;s+=1){const c=[];for(let o=0;o<t.length;o+=1)s&1<<o&&c.push(t[o]);a.push(c)}return a}const P="★",ee=t=>{const a={};return t&&t.length>0&&t.forEach(n=>{if(n.inventory){const s=n.specs.map(o=>o.valueName);Z(s).forEach(o=>{const u=o.join(P);a[u]||(a[u]=[]),a[u].push(n.id)})}}),a};function se(t,a){t&&t.length>0&&t.forEach(n=>{n.values.forEach(s=>{s.disabled=!a[s.name]})})}const T=t=>{const a=[];return t.forEach((n,s)=>{const c=n.values.find(o=>o.selected);c?a[s]=c.name:a[s]=void 0}),a},te=(t,a)=>{t.forEach((n,s)=>{const c=T(t);n.values.forEach(o=>{if(!o.selected){c[s]=o.name;const u=c.filter(l=>l).join(P);o.disabled=!a[u]}})})},oe={name:"XtxGoodSku",props:{goods:{type:Object,default:()=>({specs:[],skus:[]})}},emits:["change"],setup(t,{emit:a}){let n={};return R(()=>{n=ee(t.goods.skus),se(t.goods.specs,n)}),{clickSpecs:(c,o)=>{if(o.disabled)return!1;o.selected?o.selected=!1:(c.values.forEach(l=>{l.selected=!1}),o.selected=!0),te(t.goods.specs,n);const u=T(t.goods.specs).filter(l=>l);if(u.length===t.goods.specs.length){const l=n[u.join(P)][0],i=t.goods.skus.find(v=>v.id===l);a("change",{skuId:i.id,price:i.price,oldPrice:i.oldPrice,inventory:i.inventory,specsText:i.specs.reduce((v,b)=>`${v} ${b.name}：${b.valueName}`,"").trim()})}else a("change",{})}}}},ae={class:"goods-sku"},le=["onClick","src"],ne=["onClick"];function ce(t,a,n,s,c,o){return r(),_("div",ae,[(r(!0),_(y,null,x(n.goods.specs,u=>(r(),_("dl",{key:u.id},[e("dt",null,d(u.name),1),e("dd",null,[(r(!0),_(y,null,x(u.values,l=>(r(),_(y,{key:l.name},[l.picture?(r(),_("img",{key:0,class:C({selected:l.selected,disabled:l.disabled}),onClick:i=>s.clickSpecs(u,l),src:l.picture},null,10,le)):(r(),_("span",{key:1,class:C({selected:l.selected,disabled:l.disabled}),onClick:i=>s.clickSpecs(u,l)},d(l.name),11,ne))],64))),128))])]))),128))])}const ie=E(oe,[["render",ce],["__scopeId","data-v-ec1712d8"]]),ue={class:"goods-image"},de=["src"],re={class:"small"},_e=["onMouseover"],pe=["src"],ve={__name:"Detailimg",props:{imageList:{type:Array,default:()=>[]}},setup(t){const a=h(0),n=S=>{a.value=S},s=h(null),{elementX:c,elementY:o,isOutside:u}=Y(s),l=h(0),i=h(0),v=h(0),b=h(0),$=()=>{c.value>100&&c.value<300&&(l.value=c.value-100),o.value>100&&o.value<300&&(i.value=o.value-100),c.value<100&&(l.value=0),c.value>300&&(l.value=200),o.value<100&&(i.value=0),o.value>300&&(i.value=200),v.value=-l.value*2,b.value=-i.value*2};return(S,w)=>(r(),_("div",ue,[e("div",{onMousemove:$,class:"middle",ref_key:"target",ref:s},[e("img",{src:t.imageList[a.value],alt:""},null,8,de),L(e("div",{class:"layer",style:B({left:`${l.value}px`,top:`${i.value}px`})},null,4),[[M,!N(u)]])],544),e("ul",re,[(r(!0),_(y,null,x(t.imageList,(I,p)=>(r(),_("li",{onMouseover:ss=>n(p),class:C({active:a.value===p}),key:p},[e("img",{src:I,alt:""},null,8,pe)],42,_e))),128))]),L(e("div",{class:"large",style:B([{backgroundImage:`url(${t.imageList[a.value]})`,backgroundPositionX:`${v.value}px`,backgroundPositionY:`${b.value}px`}])},null,4),[[M,!N(u)]])]))}},me=E(ve,[["__scopeId","data-v-b13c1c51"]]),fe=t=>V.get("/goods",{params:{id:t}}),he=(t,a,n)=>V.get("/goods/hot",{params:{id:t,type:a,limit:n}}),ge={class:"goods-hot"},ke=["src"],be={class:"name ellipsis"},ye={class:"desc ellipsis"},$e={class:"price"},xe={__name:"DetaiHot",props:{type:{type:Number,required:!0}},setup(t){const a=A(),n=t,s=h([]),c=async()=>{const o=await he(a.params.id,n.type,2);s.value=o.result};return j(()=>c()),(o,u)=>{const l=F("RouterLink");return r(),_("div",ge,[e("h3",null,[z(o.$slots,"default",{},void 0,!0)]),(r(!0),_(y,null,x(s.value,i=>(r(),H(l,{to:"/",class:"goods-item",key:i.id},{default:k(()=>[e("img",{src:i.picture,alt:""},null,8,ke),e("p",be,d(i.name),1),e("p",ye,d(i.desc),1),e("p",$e,"¥"+d(i.orderNum),1)]),_:2},1024))),128))])}}},D=E(xe,[["__scopeId","data-v-d6160f98"]]),g=t=>(K("data-v-6b32c6d2"),t=t(),W(),t),Se={key:0,class:"xtx-goods-page"},Ee={class:"container"},Ie={class:"bread-container"},Ce={class:"info-container"},Pe={class:"goods-info"},we={class:"media"},Le={class:"goods-sales"},Me=g(()=>e("p",null,"销量人气",-1)),Ne=g(()=>e("p",null,[e("i",{class:"iconfont icon-task-filling"}),f("销量人气")],-1)),Be=g(()=>e("p",null,"商品评价",-1)),De=g(()=>e("p",null,[e("i",{class:"iconfont icon-comment-filling"}),f("查看评价")],-1)),Ve=g(()=>e("p",null,"收藏人气",-1)),Ae=g(()=>e("p",null,[e("i",{class:"iconfont icon-favorite-filling"}),f("收藏商品")],-1)),je=g(()=>e("p",null,"品牌信息",-1)),Te=g(()=>e("p",null,[e("i",{class:"iconfont icon-dynamic-filling"}),f("品牌主页")],-1)),Xe={class:"spec"},qe={class:"g-name"},Ge={class:"g-desc"},Oe={class:"g-price"},Re=g(()=>e("div",{class:"g-service"},[e("dl",null,[e("dt",null,"促销"),e("dd",null,"12月好物放送，App领券购买直降120元")]),e("dl",null,[e("dt",null,"服务"),e("dd",null,[e("span",null,"无忧退货"),e("span",null,"快速退款"),e("span",null,"免费包邮"),e("a",{href:"javascript:;"},"了解详情")])])],-1)),Ye={class:"goods-footer"},ze={class:"goods-article"},He={class:"goods-tabs"},Fe=g(()=>e("nav",null,[e("a",null,"商品详情")],-1)),Ue={class:"goods-detail"},Qe={class:"attrs"},Je={class:"dt"},Ke={class:"dd"},We=["src"],Ze={class:"goods-aside"},es={__name:"index",setup(t){const a=A(),n=U(),s=h({}),c=async()=>{const v=await fe(a.params.id);s.value=v.result};j(()=>c());const o=h({}),u=v=>{o.value=v},l=h(1),i=()=>{o.value.skuId?n.addCart({id:s.value.id,name:s.value.name,picture:s.value.mainPictures[0],price:s.value.price,count:l.value,skuId:o.value,attrsText:o.value.specsText,selected:!0}):J.warning("请选择商品规格")};return(v,b)=>{const $=O,S=G,w=q,I=X;return s.value.details?(r(),_("div",Se,[e("div",Ee,[e("div",Ie,[m(S,{separator:">"},{default:k(()=>[m($,{to:{path:"/"}},{default:k(()=>[f("首页")]),_:1}),m($,{to:{path:`/category/${s.value.categories[1].id}`}},{default:k(()=>[f(d(s.value.categories[1].name),1)]),_:1},8,["to"]),m($,{to:{path:`/category/sub/${s.value.categories[0].id}`}},{default:k(()=>[f(d(s.value.categories[0].name),1)]),_:1},8,["to"]),m($,null,{default:k(()=>[f(d(s.value.desc),1)]),_:1})]),_:1})]),e("div",Ce,[e("div",null,[e("div",Pe,[e("div",we,[m(me,{imageList:s.value.mainPictures},null,8,["imageList"]),e("ul",Le,[e("li",null,[Me,e("p",null,d(s.value.salesCount)+"+",1),Ne]),e("li",null,[Be,e("p",null,d(s.value.commentCount)+"+",1),De]),e("li",null,[Ve,e("p",null,d(s.value.collectCount)+"+",1),Ae]),e("li",null,[je,e("p",null,d(s.value.brand.name),1),Te])])]),e("div",Xe,[e("p",qe,d(s.value.name),1),e("p",Ge,d(s.value.desc),1),e("p",Oe,[e("span",null,d(s.value.oldPrice),1),e("span",null,d(s.value.price),1)]),Re,m(ie,{goods:s.value,onChange:u},null,8,["goods"]),m(w,{modelValue:l.value,"onUpdate:modelValue":b[0]||(b[0]=p=>l.value=p),min:1},null,8,["modelValue"]),e("div",null,[m(I,{onClick:i,size:"large",class:"btn"},{default:k(()=>[f(" 加入购物车 ")]),_:1})])])]),e("div",Ye,[e("div",ze,[e("div",He,[Fe,e("div",Ue,[e("ul",Qe,[(r(!0),_(y,null,x(s.value.details.properties,p=>(r(),_("li",{key:p},[e("span",Je,d(p.name),1),e("span",Ke,d(p.value),1)]))),128))]),(r(!0),_(y,null,x(s.value.details.pictures,p=>(r(),_("img",{key:p,src:p,alt:""},null,8,We))),128))])])]),e("div",Ze,[m(D,{type:1},{default:k(()=>[f("24小时热门")]),_:1}),m(D,{type:2},{default:k(()=>[f("本周热门")]),_:1})])])])])])])):Q("",!0)}}},ds=E(es,[["__scopeId","data-v-6b32c6d2"]]);export{ds as default};
