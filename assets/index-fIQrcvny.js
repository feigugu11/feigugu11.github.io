/* empty css             */import{b as te,E as he}from"./button-BkJlW2RO.js";import{z as ge,B as J,aq as be,C as _e,K,aC as Ce,u as ee,aM as we,aN as de,aO as se,w as Z,aP as ke,aQ as Ee,aR as Ie,aS as Te,aT as H,e as oe,g as W,n as U,F as $,v as L,aU as Me,as as Se,ag as $e,A as le,m as R,q as k,s as F,U as e,x as A,y as t,R as g,M as C,N as G,O as Be,ai as Fe,T as Q,P as ie,_ as ce,aV as Pe,k as Ae,aW as Le,l as B,aX as De,H as Oe,ae as xe,aY as ze,aZ as ae,I as Ne,aB as Re,p as Ye,a9 as Ve,aF as je,a_ as Ue,ak as We,al as He,a$ as Xe,W as qe,ap as re,Y as Ke,Z as Ze,Q as y,G as X,a6 as ne,a0 as Ge,a4 as Qe,a2 as Je,a3 as eo}from"./index-DUfKvXl3.js";/* empty css                   */import{P as q}from"./vnode-DhOCzclK.js";import{F as oo,i as to,E as so}from"./focus-trap-avBV8qNM.js";import{t as lo,U as ue}from"./event-BE20p1dL.js";import{a as ao}from"./scroll-Bt8oC-V7.js";const no=(...o)=>s=>{o.forEach(l=>{ge(l)?l(s):l.value=s})},io=(o,s,l,u)=>{let d={offsetX:0,offsetY:0};const f=_=>{const h=_.clientX,p=_.clientY,{offsetX:r,offsetY:m}=d,b=o.value.getBoundingClientRect(),v=b.left,I=b.top,P=b.width,D=b.height,n=document.documentElement.clientWidth,Y=document.documentElement.clientHeight,j=-v+r,V=-I+m,O=n-v-P+r,x=Y-I-D+m,S=a=>{let w=r+a.clientX-h,T=m+a.clientY-p;u!=null&&u.value||(w=Math.min(Math.max(w,j),O),T=Math.min(Math.max(T,V),x)),d={offsetX:w,offsetY:T},o.value&&(o.value.style.transform=`translate(${K(w)}, ${K(T)})`)},z=()=>{document.removeEventListener("mousemove",S),document.removeEventListener("mouseup",z)};document.addEventListener("mousemove",S),document.addEventListener("mouseup",z)},i=()=>{s.value&&o.value&&s.value.addEventListener("mousedown",f)},c=()=>{s.value&&o.value&&s.value.removeEventListener("mousedown",f)};J(()=>{be(()=>{l.value?i():c()})}),_e(()=>{c()})},co=(o,s={})=>{Ce(o)||lo("[useLockscreen]","You need to pass a ref param to this function");const l=s.ns||ee("popup"),u=we(()=>l.bm("parent","hidden"));if(!de||se(document.body,u.value))return;let d=0,f=!1,i="0";const c=()=>{setTimeout(()=>{Te(document==null?void 0:document.body,u.value),f&&document&&(document.body.style.width=i)},200)};Z(o,_=>{if(!_){c();return}f=!se(document.body,u.value),f&&(i=document.body.style.width),d=ao(l.namespace.value);const h=document.documentElement.clientHeight<document.body.scrollHeight,p=ke(document.body,"overflowY");d>0&&(h||p==="scroll")&&f&&(document.body.style.width=`calc(100% - ${d}px)`),Ee(document.body,u.value)}),Ie(()=>c())},fe=o=>{if(!o)return{onClick:H,onMousedown:H,onMouseup:H};let s=!1,l=!1;return{onClick:i=>{s&&l&&o(i),s=l=!1},onMousedown:i=>{s=i.target===i.currentTarget},onMouseup:i=>{l=i.target===i.currentTarget}}},ro=oe({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:W([String,Array,Object])},zIndex:{type:W([String,Number])}}),uo={click:o=>o instanceof MouseEvent},fo="overlay";var vo=U({name:"ElOverlay",props:ro,emits:uo,setup(o,{slots:s,emit:l}){const u=ee(fo),d=_=>{l("click",_)},{onClick:f,onMousedown:i,onMouseup:c}=fe(o.customMaskEvent?void 0:d);return()=>o.mask?$("div",{class:[u.b(),o.overlayClass],style:{zIndex:o.zIndex},onClick:f,onMousedown:i,onMouseup:c},[L(s,"default")],q.STYLE|q.CLASS|q.PROPS,["onClick","onMouseup","onMousedown"]):Me("div",{class:o.overlayClass,style:{zIndex:o.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[L(s,"default")])}});const mo=vo,ve=Symbol("dialogInjectionKey"),me=oe({center:Boolean,alignCenter:Boolean,closeIcon:{type:Se},draggable:Boolean,overflow:Boolean,fullscreen:Boolean,showClose:{type:Boolean,default:!0},title:{type:String,default:""},ariaLevel:{type:String,default:"2"}}),po={close:()=>!0},yo=["aria-level"],ho=["aria-label"],go=["id"],bo=U({name:"ElDialogContent"}),_o=U({...bo,props:me,emits:po,setup(o){const s=o,{t:l}=$e(),{Close:u}=Pe,{dialogRef:d,headerRef:f,bodyId:i,ns:c,style:_}=le(ve),{focusTrapRef:h}=le(oo),p=R(()=>[c.b(),c.is("fullscreen",s.fullscreen),c.is("draggable",s.draggable),c.is("align-center",s.alignCenter),{[c.m("center")]:s.center}]),r=no(h,d),m=R(()=>s.draggable),b=R(()=>s.overflow);return io(d,f,m,b),(v,I)=>(k(),F("div",{ref:t(r),class:A(t(p)),style:ie(t(_)),tabindex:"-1"},[e("header",{ref_key:"headerRef",ref:f,class:A([t(c).e("header"),{"show-close":v.showClose}])},[L(v.$slots,"header",{},()=>[e("span",{role:"heading","aria-level":v.ariaLevel,class:A(t(c).e("title"))},g(v.title),11,yo)]),v.showClose?(k(),F("button",{key:0,"aria-label":t(l)("el.dialog.close"),class:A(t(c).e("headerbtn")),type:"button",onClick:I[0]||(I[0]=P=>v.$emit("close"))},[$(t(Fe),{class:A(t(c).e("close"))},{default:C(()=>[(k(),G(Be(v.closeIcon||t(u))))]),_:1},8,["class"])],10,ho)):Q("v-if",!0)],2),e("div",{id:t(i),class:A(t(c).e("body"))},[L(v.$slots,"default")],10,go),v.$slots.footer?(k(),F("footer",{key:0,class:A(t(c).e("footer"))},[L(v.$slots,"footer")],2)):Q("v-if",!0)],6))}});var Co=ce(_o,[["__file","dialog-content.vue"]]);const wo=oe({...me,appendToBody:Boolean,appendTo:{type:W(String),default:"body"},beforeClose:{type:W(Function)},destroyOnClose:Boolean,closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:Boolean,modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:{type:Boolean,default:!1},headerAriaLevel:{type:String,default:"2"}}),ko={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[ue]:o=>Ae(o),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},Eo=(o,s)=>{var l;const d=xe().emit,{nextZIndex:f}=Le();let i="";const c=te(),_=te(),h=B(!1),p=B(!1),r=B(!1),m=B((l=o.zIndex)!=null?l:f());let b,v;const I=De("namespace",ze),P=R(()=>{const M={},N=`--${I.value}-dialog`;return o.fullscreen||(o.top&&(M[`${N}-margin-top`]=o.top),o.width&&(M[`${N}-width`]=K(o.width))),M}),D=R(()=>o.alignCenter?{display:"flex"}:{});function n(){d("opened")}function Y(){d("closed"),d(ue,!1),o.destroyOnClose&&(r.value=!1)}function j(){d("close")}function V(){v==null||v(),b==null||b(),o.openDelay&&o.openDelay>0?{stop:b}=ae(()=>z(),o.openDelay):z()}function O(){b==null||b(),v==null||v(),o.closeDelay&&o.closeDelay>0?{stop:v}=ae(()=>a(),o.closeDelay):a()}function x(){function M(N){N||(p.value=!0,h.value=!1)}o.beforeClose?o.beforeClose(M):O()}function S(){o.closeOnClickModal&&x()}function z(){de&&(h.value=!0)}function a(){h.value=!1}function w(){d("openAutoFocus")}function T(){d("closeAutoFocus")}function pe(M){var N;((N=M.detail)==null?void 0:N.focusReason)==="pointer"&&M.preventDefault()}o.lockScroll&&co(h);function ye(){o.closeOnPressEscape&&x()}return Z(()=>o.modelValue,M=>{M?(p.value=!1,V(),r.value=!0,m.value=to(o.zIndex)?f():m.value++,Oe(()=>{d("open"),s.value&&(s.value.scrollTop=0)})):h.value&&O()}),Z(()=>o.fullscreen,M=>{s.value&&(M?(i=s.value.style.transform,s.value.style.transform=""):s.value.style.transform=i)}),J(()=>{o.modelValue&&(h.value=!0,r.value=!0,V())}),{afterEnter:n,afterLeave:Y,beforeLeave:j,handleClose:x,onModalClick:S,close:O,doClose:a,onOpenAutoFocus:w,onCloseAutoFocus:T,onCloseRequested:ye,onFocusoutPrevented:pe,titleId:c,bodyId:_,closed:p,style:P,overlayDialogStyle:D,rendered:r,visible:h,zIndex:m}},Io=["aria-label","aria-labelledby","aria-describedby"],To=U({name:"ElDialog",inheritAttrs:!1}),Mo=U({...To,props:wo,emits:ko,setup(o,{expose:s}){const l=o,u=Ne();Re({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},R(()=>!!u.title));const d=ee("dialog"),f=B(),i=B(),c=B(),{visible:_,titleId:h,bodyId:p,style:r,overlayDialogStyle:m,rendered:b,zIndex:v,afterEnter:I,afterLeave:P,beforeLeave:D,handleClose:n,onModalClick:Y,onOpenAutoFocus:j,onCloseAutoFocus:V,onCloseRequested:O,onFocusoutPrevented:x}=Eo(l,f);Ye(ve,{dialogRef:f,headerRef:i,bodyId:p,ns:d,rendered:b,style:r});const S=fe(Y),z=R(()=>l.draggable&&!l.fullscreen);return s({visible:_,dialogContentRef:c}),(a,w)=>(k(),G(Xe,{to:a.appendTo,disabled:a.appendTo!=="body"?!1:!a.appendToBody},[$(He,{name:"dialog-fade",onAfterEnter:t(I),onAfterLeave:t(P),onBeforeLeave:t(D),persisted:""},{default:C(()=>[Ve($(t(mo),{"custom-mask-event":"",mask:a.modal,"overlay-class":a.modalClass,"z-index":t(v)},{default:C(()=>[e("div",{role:"dialog","aria-modal":"true","aria-label":a.title||void 0,"aria-labelledby":a.title?void 0:t(h),"aria-describedby":t(p),class:A(`${t(d).namespace.value}-overlay-dialog`),style:ie(t(m)),onClick:w[0]||(w[0]=(...T)=>t(S).onClick&&t(S).onClick(...T)),onMousedown:w[1]||(w[1]=(...T)=>t(S).onMousedown&&t(S).onMousedown(...T)),onMouseup:w[2]||(w[2]=(...T)=>t(S).onMouseup&&t(S).onMouseup(...T))},[$(t(so),{loop:"",trapped:t(_),"focus-start-el":"container",onFocusAfterTrapped:t(j),onFocusAfterReleased:t(V),onFocusoutPrevented:t(x),onReleaseRequested:t(O)},{default:C(()=>[t(b)?(k(),G(Co,je({key:0,ref_key:"dialogContentRef",ref:c},a.$attrs,{center:a.center,"align-center":a.alignCenter,"close-icon":a.closeIcon,draggable:t(z),overflow:a.overflow,fullscreen:a.fullscreen,"show-close":a.showClose,title:a.title,"aria-level":a.headerAriaLevel,onClose:t(n)}),Ue({header:C(()=>[a.$slots.title?L(a.$slots,"title",{key:1}):L(a.$slots,"header",{key:0,close:t(n),titleId:t(h),titleClass:t(d).e("title")})]),default:C(()=>[L(a.$slots,"default")]),_:2},[a.$slots.footer?{name:"footer",fn:C(()=>[L(a.$slots,"footer")])}:void 0]),1040,["center","align-center","close-icon","draggable","overflow","fullscreen","show-close","title","aria-level","onClose"])):Q("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])],46,Io)]),_:3},8,["mask","overlay-class","z-index"]),[[We,t(_)]])]),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["to","disabled"]))}});var So=ce(Mo,[["__file","dialog.vue"]]);const $o=qe(So),Bo=()=>re.get("/member/order/pre"),Fo=o=>re.post("/member/order",o),E=o=>(Je("data-v-36c1ec90"),o=o(),eo(),o),Po={class:"xtx-pay-checkout-page"},Ao={class:"container"},Lo={class:"wrapper"},Do=E(()=>e("h3",{class:"box-title"},"收货地址",-1)),Oo={class:"box-body"},xo={class:"address"},zo={class:"text"},No={key:0,class:"none"},Ro={key:1},Yo=E(()=>e("span",null,[y("收"),e("i"),y("货"),e("i"),y("人：")],-1)),Vo=E(()=>e("span",null,"联系方式：",-1)),jo=E(()=>e("span",null,"收货地址：",-1)),Uo={class:"action"},Wo=E(()=>e("h3",{class:"box-title"},"商品信息",-1)),Ho={class:"box-body"},Xo={class:"goods"},qo=E(()=>e("thead",null,[e("tr",null,[e("th",{width:"520"},"商品信息"),e("th",{width:"170"},"单价"),e("th",{width:"170"},"数量"),e("th",{width:"170"},"小计"),e("th",{width:"170"},"实付")])],-1)),Ko={href:"javascript:;",class:"info"},Zo=["src"],Go={class:"right"},Qo=Ge('<h3 class="box-title" data-v-36c1ec90>配送时间</h3><div class="box-body" data-v-36c1ec90><a class="my-btn active" href="javascript:;" data-v-36c1ec90> 不限送货时间：周一至周日 </a><a class="my-btn" href="javascript:;" data-v-36c1ec90>工作日送货：周一至周五</a><a class="my-btn" href="javascript:;" data-v-36c1ec90>双休日、假日送货：周六至周日</a></div><h3 class="box-title" data-v-36c1ec90>支付方式</h3><div class="box-body" data-v-36c1ec90><a class="my-btn active" href="javascript:;" data-v-36c1ec90>在线支付</a><a class="my-btn" href="javascript:;" data-v-36c1ec90>货到付款</a><span style="color:#999;" data-v-36c1ec90>货到付款需付5元手续费</span></div><h3 class="box-title" data-v-36c1ec90>金额明细</h3>',5),Jo={class:"box-body"},et={class:"total"},ot=E(()=>e("dt",null,"商品件数：",-1)),tt=E(()=>e("dt",null,"商品总价：",-1)),st=E(()=>e("dt",null,[y("运"),e("i"),y("费：")],-1)),lt=E(()=>e("dt",null,"应付总额：",-1)),at={class:"price"},nt={class:"submit"},dt={class:"addressWrapper"},it=["onClick"],ct=E(()=>e("span",null,[y("收"),e("i"),y("货"),e("i"),y("人：")],-1)),rt=E(()=>e("span",null,"联系方式：",-1)),ut=E(()=>e("span",null,"收货地址：",-1)),ft={class:"dialog-footer"},vt={__name:"index",setup(o){const s=Ze(),l=B({}),u=B({}),d=async()=>{const{result:p}=await Bo();l.value=p;const r=l.value.userAddresses.find(m=>m.isDefault===0);u.value=r,i.value=r};J(async()=>{d()});const f=B(!1),i=B({}),c=p=>{i.value=p,console.log(p)},_=()=>{u.value=i.value,f.value=!1},h=async()=>{const p=await l.value.goods.map(m=>({skuId:m.skuId,count:m.count})),r=await Fo({deliveryTimeType:1,payType:1,payChannel:"",goods:p,addressId:u.value.id});r.code==="1"?s.push(`/pay?id=${r.result.id}`):Qe.error("订单提交失败，请刷新页面并重试")};return(p,r)=>{var v,I,P,D;const m=he,b=$o;return k(),F(X,null,[e("div",Po,[e("div",Ao,[e("div",Lo,[Do,e("div",Oo,[e("div",xo,[e("div",zo,[u.value?(k(),F("ul",Ro,[e("li",null,[Yo,y(g(u.value.receiver),1)]),e("li",null,[Vo,y(g(u.value.contact),1)]),e("li",null,[jo,y(g(u.value.fullLocation)+" "+g(u.value.address),1)])])):(k(),F("div",No,"您需要先添加收货地址才可提交订单。"))]),e("div",Uo,[$(m,{size:"large",onClick:r[0]||(r[0]=n=>f.value=!0)},{default:C(()=>[y(" 切换地址 ")]),_:1}),$(m,{size:"large",onClick:r[1]||(r[1]=n=>p.addFlag=!0)},{default:C(()=>[y(" 添加地址 ")]),_:1})])])]),Wo,e("div",Ho,[e("table",Xo,[qo,e("tbody",null,[(k(!0),F(X,null,ne(l.value.goods,n=>(k(),F("tr",{key:n.id},[e("td",null,[e("a",Ko,[e("img",{src:n.picture,alt:""},null,8,Zo),e("div",Go,[e("p",null,g(n.name),1),e("p",null,g(n.attrsText),1)])])]),e("td",null,"¥"+g(n.price),1),e("td",null,g(n.count),1),e("td",null,"¥"+g(n.totalPrice),1),e("td",null,"¥"+g(n.totalPayPrice),1)]))),128))])])]),Qo,e("div",Jo,[e("div",et,[e("dl",null,[ot,e("dd",null,g((v=l.value.summary)==null?void 0:v.goodsCount)+"件",1)]),e("dl",null,[tt,e("dd",null,"¥"+g((I=l.value.summary)==null?void 0:I.totalPrice.toFixed(2)),1)]),e("dl",null,[st,e("dd",null,"¥"+g((P=l.value.summary)==null?void 0:P.postFee.toFixed(2)),1)]),e("dl",null,[lt,e("dd",at,g((D=l.value.summary)==null?void 0:D.totalPayPrice.toFixed(2)),1)])])]),e("div",nt,[$(m,{onClick:h,type:"primary",size:"large"},{default:C(()=>[y(" 提交订单 ")]),_:1})])])])]),$(b,{modelValue:f.value,"onUpdate:modelValue":r[2]||(r[2]=n=>f.value=n),title:"切换收货地址",width:"30%",center:""},{footer:C(()=>[e("span",ft,[$(m,null,{default:C(()=>[y("取消")]),_:1}),$(m,{onClick:_,type:"primary"},{default:C(()=>[y("确定")]),_:1})])]),default:C(()=>[e("div",dt,[(k(!0),F(X,null,ne(l.value.userAddresses,n=>(k(),F("div",{class:A(["text item",{active:i.value.id===n.id}]),onClick:Y=>c(n),key:n.id},[e("ul",null,[e("li",null,[ct,y(g(n.receiver),1)]),e("li",null,[rt,y(g(n.contact),1)]),e("li",null,[ut,y(g(n.fullLocation+n.address),1)])])],10,it))),128))])]),_:1},8,["modelValue"])],64)}}},wt=Ke(vt,[["__scopeId","data-v-36c1ec90"]]);export{wt as default};
