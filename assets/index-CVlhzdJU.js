/* empty css             */import{_ as O}from"./GoodsItem-BFg2IEP8.js";import{E as P,a as k}from"./tab-pane-AKIOTdc4.js";import{E as M,a as U}from"./breadcrumb-item-BHV3nmiG.js";import{a as R,b as I}from"./category-CnLhmu9L.js";import{z as q,H as N,Y as z,ab as Y,l as g,B as $,s as C,U as F,F as d,M as v,a9 as j,q as H,Q as T,R as L}from"./index-DUfKvXl3.js";import{t as G}from"./event-BE20p1dL.js";import{g as K}from"./scroll-Bt8oC-V7.js";import{t as V}from"./throttle-OPMkhhxh.js";import"./index-D4g63_qU.js";import"./vnode-DhOCzclK.js";const x=e=>{let o=0,t=e;for(;t;)o+=t.offsetTop,t=t.offsetParent;return o},Q=(e,o)=>Math.abs(x(e)-x(o)),c="ElInfiniteScroll",J=50,W=200,X=0,Z={delay:{type:Number,default:W},distance:{type:Number,default:X},disabled:{type:Boolean,default:!1},immediate:{type:Boolean,default:!0}},w=(e,o)=>Object.entries(Z).reduce((t,[n,a])=>{var l,r;const{type:f,default:u}=a,i=e.getAttribute(`infinite-scroll-${n}`);let s=(r=(l=o[i])!=null?l:i)!=null?r:u;return s=s==="false"?!1:s,s=f(s),t[n]=Number.isNaN(s)?u:s,t},{}),A=e=>{const{observer:o}=e[c];o&&(o.disconnect(),delete e[c].observer)},ee=(e,o)=>{const{container:t,containerEl:n,instance:a,observer:l,lastScrollTop:r}=e[c],{disabled:f,distance:u}=w(e,a),{clientHeight:i,scrollHeight:s,scrollTop:m}=n,p=m-r;if(e[c].lastScrollTop=m,l||f||p<0)return;let b=!1;if(t===e)b=s-(i+m)<=u;else{const{clientTop:_,scrollHeight:h}=e,E=Q(e,n);b=m+i>=E+_+h-u}b&&o.call(a)};function y(e,o){const{containerEl:t,instance:n}=e[c],{disabled:a}=w(e,n);a||t.clientHeight===0||(t.scrollHeight<=t.clientHeight?o.call(n):A(e))}const te={async mounted(e,o){const{instance:t,value:n}=o;q(n)||G(c,"'v-infinite-scroll' binding value must be a function"),await N();const{delay:a,immediate:l}=w(e,t),r=K(e,!0),f=r===window?document.documentElement:r,u=V(ee.bind(null,e,n),a);if(r){if(e[c]={instance:t,container:r,containerEl:f,delay:a,cb:n,onScroll:u,lastScrollTop:f.scrollTop},l){const i=new MutationObserver(V(y.bind(null,e,n),J));e[c].observer=i,i.observe(e,{childList:!0,subtree:!0}),y(e,n)}r.addEventListener("scroll",u)}},unmounted(e){const{container:o,onScroll:t}=e[c];o==null||o.removeEventListener("scroll",t),A(e)},async updated(e){if(!e[c])await N();else{const{containerEl:o,cb:t,observer:n}=e[c];o.clientHeight&&n&&y(e,t)}}},S=te;S.install=e=>{e.directive("InfiniteScroll",S)};const oe=S,ne={class:"container"},se={class:"bread-container"},ae={class:"sub-container"},le=["infinite-scroll-disabled"],re={__name:"index",setup(e){const o=Y(),t=g({}),n=async()=>{const{result:s}=await R(o.params.id);t.value=s},a=g([]),l=g({categoryId:o.params.id,page:1,pageSize:20,sortField:"publishTime"}),r=async()=>{const{result:s}=await I(l.value);a.value=s.items},f=()=>{l.value.page=1,r()},u=async()=>{l.value.page++;const{result:s}=await I(l.value);s.items.length===0&&(i.value=!0),a.value=[...a.value,...s.items]},i=g(!1);return $(()=>{n(),r()}),(s,m)=>{const p=U,b=M,_=k,h=P,E=O,B=oe;return H(),C("div",ne,[F("div",se,[d(b,{separator:">"},{default:v(()=>[d(p,{to:{path:"/"}},{default:v(()=>[T("首页")]),_:1}),d(p,{to:{path:`/category/${t.value.parentId}`}},{default:v(()=>[T(L(t.value.parentName),1)]),_:1},8,["to"]),d(p,null,{default:v(()=>[T(L(t.value.name),1)]),_:1})]),_:1})]),F("div",ae,[d(h,{modelValue:l.value.sortField,"onUpdate:modelValue":m[0]||(m[0]=D=>l.value.sortField=D),onTabChange:f},{default:v(()=>[d(_,{label:"最新商品",name:"publishTime"}),d(_,{label:"最高人气",name:"orderNum"}),d(_,{label:"评论最多",name:"evaluateNum"})]),_:1},8,["modelValue"]),j((H(),C("div",{class:"body","infinite-scroll-disabled":i.value},[d(E,{goods:a.value},null,8,["goods"])],8,le)),[[B,u]])])])}}},he=z(re,[["__scopeId","data-v-fd467988"]]);export{he as default};
